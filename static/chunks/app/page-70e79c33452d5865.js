(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2751:(e,t,a)=>{Promise.resolve().then(a.bind(a,8406))},8406:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>eO});var r=a(5155),s=a(2115),o=a(5695),d=a(4477);let i=(0,d.createServerReference)("4028ce5da46c7d6d3323d06945e4e4cf6430475b32",d.callServer,void 0,d.findSourceMapURL,"generateProductName");var n=a(9708),l=a(2085),c=a(2596),u=a(9688);function m(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,u.QP)((0,c.$)(t))}let p=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),f=s.forwardRef((e,t)=>{let{className:a,variant:s,size:o,asChild:d=!1,...i}=e,l=d?n.DX:"button";return(0,r.jsx)(l,{className:m(p({variant:s,size:o,className:a})),ref:t,...i})});f.displayName="Button";let x=s.forwardRef((e,t)=>{let{className:a,type:s,...o}=e;return(0,r.jsx)("input",{type:s,className:m("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...o})});x.displayName="Input";var h=a(965),g=a(3158),v=a(3900);function y(e){let{className:t,classNames:a,showOutsideDays:s=!0,...o}=e;return(0,r.jsx)(v.hv,{showOutsideDays:s,className:m("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:m(p({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:m(p({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...a},components:{IconLeft:e=>{let{className:t,...a}=e;return(0,r.jsx)(h.A,{className:m("h-4 w-4",t),...a})},IconRight:e=>{let{className:t,...a}=e;return(0,r.jsx)(g.A,{className:m("h-4 w-4",t),...a})}},...o})}y.displayName="Calendar";let N=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:m("rounded-lg border bg-card text-card-foreground shadow-sm",a),...s})});N.displayName="Card";let b=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:m("flex flex-col space-y-1.5 p-6",a),...s})});b.displayName="CardHeader";let j=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:m("text-2xl font-semibold leading-none tracking-tight",a),...s})});j.displayName="CardTitle";let w=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:m("text-sm text-muted-foreground",a),...s})});w.displayName="CardDescription";let A=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:m("p-6 pt-0",a),...s})});A.displayName="CardContent",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:m("flex items-center p-6 pt-0",a),...s})}).displayName="CardFooter";var _=a(3013);let E=0,C=new Map,P=e=>{if(C.has(e))return;let t=setTimeout(()=>{C.delete(e),R({type:"REMOVE_TOAST",toastId:e})},1e6);C.set(e,t)},S=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?P(a):e.toasts.forEach(e=>{P(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},k=[],D={toasts:[]};function R(e){D=S(D,e),k.forEach(e=>{e(D)})}function T(e){let{...t}=e,a=(E=(E+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>R({type:"DISMISS_TOAST",toastId:a});return R({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||r()}}}),{id:a,dismiss:r,update:e=>R({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function z(){let[e,t]=s.useState(D);return s.useEffect(()=>(k.push(t),()=>{let e=k.indexOf(t);e>-1&&k.splice(e,1)}),[e]),{...e,toast:T,dismiss:e=>R({type:"DISMISS_TOAST",toastId:e})}}var O=a(9968),I=a(518),V=a(1887),q=a(154),M=a(511),F=a(5318),L=a(5599),U=a(8027),G=a(8763),J=a(1840),Z=a(2448),Q=a(7270),H=a(8186),Y=a(6936),B=a(172),X=a(9637),$=a(4063),K=a(8046),W=a(4301),ee=a(5074),et=a(7057),ea=a(8271),er=a(7390),es=a(5731),eo=a(4956),ed=a(1721),ei=a(7706);let en={arrowRight:O.A,check:I.A,chevronDown:V.A,circle:q.A,workflow:M.A,close:F.A,copy:L.A,dark:U.A,edit:G.A,externalLink:J.A,file:Z.A,help:Q.A,home:H.A,light:Y.A,loader:B.A,mail:X.A,messageSquare:$.A,plus:K.A,plusCircle:W.A,search:ee.A,server:et.A,settings:ea.A,share:er.A,shield:es.A,spinner:B.A,trash:eo.A,user:ed.A,barcode:ei.A};var el=a(4520);let ec=el.bL;el.l9;let eu=el.ZL,em=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(el.hJ,{className:m("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...s,ref:t})});em.displayName=el.hJ.displayName;let ep=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsxs)(eu,{children:[(0,r.jsx)(em,{}),(0,r.jsx)(el.UC,{ref:t,className:m("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...s})]})});ep.displayName=el.UC.displayName;let ef=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:m("flex flex-col space-y-2 text-center sm:text-left",t),...a})};ef.displayName="AlertDialogHeader";let ex=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:m("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};ex.displayName="AlertDialogFooter";let eh=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(el.hE,{ref:t,className:m("text-lg font-semibold",a),...s})});eh.displayName=el.hE.displayName;let eg=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(el.VY,{ref:t,className:m("text-sm text-muted-foreground",a),...s})});eg.displayName=el.VY.displayName;let ev=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(el.rc,{ref:t,className:m(p(),a),...s})});ev.displayName=el.rc.displayName;let ey=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(el.ZD,{ref:t,className:m(p({variant:"outline"}),"mt-2 sm:mt-0",a),...s})});ey.displayName=el.ZD.displayName;var eN=a(1362),eb=a(4556);let ej=eb.bL,ew=eb.l9;eb.YJ,eb.ZL,eb.Pb,eb.z6,s.forwardRef((e,t)=>{let{className:a,inset:s,children:o,...d}=e;return(0,r.jsxs)(eb.ZP,{ref:t,className:m("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",s&&"pl-8",a),...d,children:[o,(0,r.jsx)(g.A,{className:"ml-auto"})]})}).displayName=eb.ZP.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(eb.G5,{ref:t,className:m("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...s})}).displayName=eb.G5.displayName;let eA=s.forwardRef((e,t)=>{let{className:a,sideOffset:s=4,...o}=e;return(0,r.jsx)(eb.ZL,{children:(0,r.jsx)(eb.UC,{ref:t,sideOffset:s,className:m("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...o})})});eA.displayName=eb.UC.displayName;let e_=s.forwardRef((e,t)=>{let{className:a,inset:s,...o}=e;return(0,r.jsx)(eb.q7,{ref:t,className:m("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",s&&"pl-8",a),...o})});function eE(){let{setTheme:e}=(0,eN.D)();return(0,r.jsxs)(ej,{children:[(0,r.jsx)(ew,{asChild:!0,children:(0,r.jsxs)(f,{variant:"outline",size:"icon",children:[(0,r.jsx)(Y.A,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),(0,r.jsx)(U.A,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),(0,r.jsx)("span",{className:"sr-only",children:"Toggle theme"})]})}),(0,r.jsxs)(eA,{align:"end",children:[(0,r.jsx)(e_,{onClick:()=>e("light"),children:"Claro"}),(0,r.jsx)(e_,{onClick:()=>e("dark"),children:"Escuro"}),(0,r.jsx)(e_,{onClick:()=>e("system"),children:"Sistema"})]})]})}e_.displayName=eb.q7.displayName,s.forwardRef((e,t)=>{let{className:a,children:s,checked:o,...d}=e;return(0,r.jsxs)(eb.H_,{ref:t,className:m("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:o,...d,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(eb.VF,{children:(0,r.jsx)(I.A,{className:"h-4 w-4"})})}),s]})}).displayName=eb.H_.displayName,s.forwardRef((e,t)=>{let{className:a,children:s,...o}=e;return(0,r.jsxs)(eb.hN,{ref:t,className:m("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...o,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(eb.VF,{children:(0,r.jsx)(q.A,{className:"h-2 w-2 fill-current"})})}),s]})}).displayName=eb.hN.displayName,s.forwardRef((e,t)=>{let{className:a,inset:s,...o}=e;return(0,r.jsx)(eb.JU,{ref:t,className:m("px-2 py-1.5 text-sm font-semibold",s&&"pl-8",a),...o})}).displayName=eb.JU.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(eb.wv,{ref:t,className:m("-mx-1 my-1 h-px bg-muted",a),...s})}).displayName=eb.wv.displayName;let eC=(0,l.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),eP=s.forwardRef((e,t)=>{let{className:a,variant:s,...o}=e;return(0,r.jsx)("div",{ref:t,role:"alert",className:m(eC({variant:s}),a),...o})});eP.displayName="Alert";let eS=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("h5",{ref:t,className:m("mb-1 font-medium leading-none tracking-tight",a),...s})});eS.displayName="AlertTitle";let ek=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:m("text-sm [&_p]:leading-relaxed",a),...s})});ek.displayName="AlertDescription";let eD=e=>{if(!/^\d+$/.test(e)||13!==e.length)return!1;let t=0;for(let a=12;a>=0;a--){let r=parseInt(e[a],10);a%2==0?t+=r:t+=3*r}return t%10==0},eR=e=>{let{expirationDate:t}=e,{toast:a}=z();return(0,s.useEffect)(()=>{if(!t)return;let e=new Date,r=Math.ceil((t.getTime()-e.getTime())/864e5);r<=30&&r>7?a({title:"Alerta de Validade",description:"Produto expira em ".concat(r," dias.")}):r<=7&&r>=0?a({title:"Aviso de Validade",description:"Produto expira em ".concat(r," dias!")}):r<0&&a({title:"Produto Expirado",description:"Este produto j\xe1 expirou!"})},[t,a]),null},eT=async e=>{try{let t=await fetch("https://world.openfoodfacts.org/api/v0/product/".concat(e,".json")),a=await t.json();if(1!==a.status||!a.product)return console.warn("Product with EAN ".concat(e," not found in external API")),"";if(a.product.product_name_pt)return a.product.product_name_pt;return a.product.product_name}catch(e){return console.error("Error fetching product name:",e),""}},ez=async(e,t)=>{let a=await eT(e);if(!a)try{a=(await i({eanCode:e})).productName}catch(e){console.error("Error generating product name:",e),a=""}return a?(t(!1),a):(t(!0),"Nome do Produto N\xe3o Encontrado")};function eO(){let[e,t]=(0,s.useState)(""),[d,i]=(0,s.useState)(""),[n,l]=(0,s.useState)(null),[c,u]=(0,s.useState)(1),[m,p]=(0,s.useState)([]);(0,o.useRouter)();let{toast:h}=z(),[g,v]=(0,s.useState)(!0),[E,C]=(0,s.useState)(!1),[P,S]=(0,s.useState)(""),k=(0,s.useRef)(null),[D,R]=(0,s.useState)(!1),[T,O]=(0,s.useState)(!1);(0,s.useEffect)(()=>{let e=localStorage.getItem("scannedProducts");e&&p(JSON.parse(e).map(e=>({...e,expirationDate:e.expirationDate?new Date(e.expirationDate):null,quantity:e.quantity||1})))},[]),(0,s.useEffect)(()=>{localStorage.setItem("scannedProducts",JSON.stringify(m))},[m]);let I=async()=>{if(!eD(e)){v(!1),h({title:"Error",description:"C\xf3digo EAN inv\xe1lido."});return}if(v(!0),!n){h({title:"Error",description:"Por favor, selecione uma data de validade."});return}let a=Number(c);if(isNaN(a)||a<=0){h({title:"Error",description:"A quantidade deve ser um n\xfamero maior que zero."});return}if(c<=0){h({title:"Error",description:"A quantidade deve ser maior que zero."});return}ez(e,C).then(a=>{i(a),"Nome do Produto N\xe3o Encontrado"!==a&&(p([...m,{eanCode:e,productName:a,expirationDate:n,quantity:c}]),t(""),l(null),u(1),h({title:"Sucesso",description:"Produto escaneado e salvo."}))})},V=[...m].sort((e,t)=>e.expirationDate&&t.expirationDate?e.expirationDate.getTime()-t.expirationDate.getTime():0),q=async()=>{let e=await Promise.all([a.e(524),a.e(436)]).then(a.bind(a,3925));if(!(null==V?void 0:V.length))return;let t=V.map(e=>({"C\xf3digo EAN":e.eanCode,"Nome do Produto":e.productName,"Data de Validade":e.expirationDate instanceof Date?(0,_.GP)(e.expirationDate,"dd/MM/yyyy"):"Sem data",Quantidade:e.quantity})),r=e.utils.book_new(),s=e.utils.json_to_sheet(t);e.utils.book_append_sheet(r,s,"Validades"),e.writeFile(r,"validades.xlsx")},M=async()=>{try{let e=await Promise.all([a.e(524),a.e(436)]).then(a.bind(a,3925)),t=V.map(e=>({"C\xf3digo EAN":e.eanCode,"Nome do Produto":e.productName,"Data de Validade":e.expirationDate?(0,_.GP)(e.expirationDate,"dd/MM/yyyy"):"Sem data",Quantidade:e.quantity})),r=e.utils.book_new(),s=e.utils.json_to_sheet(t);e.utils.book_append_sheet(r,s,"Validades");let o=e.write(r,{bookType:"xlsx",type:"array"}),d=new Blob([o],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),i=new File([d],"validades.xlsx",{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});navigator.share?navigator.share({title:"Lista de Validades",text:"Lista de validades de produtos escaneados.",files:[i]}).then(()=>console.log("Compartilhado com sucesso")).catch(e=>console.error("Erro ao compartilhar:",e)):h({title:"Erro",description:"Compartilhamento n\xe3o suportado neste navegador."})}catch(e){console.error("Erro ao compartilhar:",e),h({title:"Erro",description:"Erro ao gerar ou compartilhar o arquivo Excel."})}},F=e=>{let t=[...m];t.splice(e,1),p(t),h({title:"Sucesso",description:"Produto removido da lista."})};return(0,s.useEffect)(()=>{(async()=>{try{let e=await navigator.mediaDevices.getUserMedia({video:!0});R(!0),k.current&&(k.current.srcObject=e)}catch(e){console.error("Error accessing camera:",e),R(!1),h({variant:"destructive",title:"Camera Access Denied",description:"Please enable camera permissions in your browser settings to use this app."})}})()},[]),(0,r.jsxs)("div",{className:"flex flex-col items-center justify-start min-h-screen bg-secondary p-4",children:[(0,r.jsxs)("header",{className:"w-full text-center mb-8",children:[(0,r.jsx)("div",{className:"absolute top-4 right-4",children:(0,r.jsx)(eE,{})}),(0,r.jsx)("h1",{className:"text-2xl font-bold text-primary",children:"ValidaF\xe1cil"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Escaneie produtos e acompanhe as datas de validade"})]}),(0,r.jsxs)(N,{className:"w-full max-w-md mb-4",children:[(0,r.jsxs)(b,{children:[(0,r.jsx)(j,{children:"Scanear Produto"}),(0,r.jsx)(w,{children:"Insira o c\xf3digo EAN e a data de validade"})]}),(0,r.jsxs)(A,{className:"grid gap-4",children:[D?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("video",{ref:k,className:"w-full aspect-video rounded-md",autoPlay:!0,muted:!0}),(0,r.jsx)(f,{onClick:()=>{O(!T)},className:"bg-primary text-primary-foreground",children:T?"Parar C\xe2mera":"Iniciar C\xe2mera"})]}):(0,r.jsxs)(eP,{variant:"destructive",children:[(0,r.jsx)(eS,{children:"Camera Access Required"}),(0,r.jsx)(ek,{children:"Please allow camera access to use this feature."})]}),(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsx)(x,{type:"number",placeholder:"C\xf3digo EAN",value:e,onChange:e=>t(e.target.value)}),!g&&(0,r.jsx)("p",{className:"text-red-500 text-sm",children:"C\xf3digo EAN inv\xe1lido"})]}),(0,r.jsx)("div",{className:"grid gap-2",children:(0,r.jsx)(x,{type:"number",placeholder:"Quantidade",value:c,onChange:e=>u(Number(e.target.value)),min:1})}),(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsx)(y,{mode:"single",selected:n,onSelect:l,className:"rounded-md border"}),n?(0,r.jsxs)("p",{className:"text-muted-foreground",children:["Data selecionada: ",(0,_.GP)(n,"PPP")]}):(0,r.jsx)("p",{className:"text-muted-foreground",children:"Por favor, selecione uma data."})]}),(0,r.jsxs)(f,{onClick:I,className:"bg-primary text-primary-foreground",children:[(0,r.jsx)(en.barcode,{className:"w-4 h-4 mr-2"}),"Escanear Produto"]})]})]}),(0,r.jsxs)(N,{className:"w-full max-w-md",children:[(0,r.jsxs)(b,{children:[(0,r.jsx)(j,{children:"Produtos Escaneados"}),(0,r.jsx)(w,{children:"Lista de produtos escaneados ordenados por data de validade"})]}),(0,r.jsxs)(A,{children:[0===V.length?(0,r.jsx)("p",{children:"Nenhum produto escaneado ainda."}):(0,r.jsx)("ul",{className:"list-none p-0",children:V.map((e,t)=>(0,r.jsxs)("li",{className:"py-2 border-b border-border flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-bold",children:e.productName}),(0,r.jsxs)("div",{children:["EAN: ",e.eanCode]}),(0,r.jsxs)("div",{children:["Quantidade: ",e.quantity]}),(0,r.jsxs)("div",{children:["Validade:"," ",e.expirationDate?(0,_.GP)(e.expirationDate,"PPP"):"Sem data de validade"]}),(0,r.jsx)(eR,{expirationDate:e.expirationDate})]}),(0,r.jsx)(f,{onClick:()=>F(t),variant:"destructive",size:"icon",children:(0,r.jsx)(en.trash,{className:"w-4 h-4"})})]},t))}),(0,r.jsxs)("div",{className:"flex justify-between mt-4",children:[(0,r.jsx)(f,{onClick:q,variant:"secondary",children:"Exportar para Excel"}),(0,r.jsx)(f,{onClick:M,variant:"secondary",children:"Compartilhar Excel"})]})]})]}),(0,r.jsx)(ec,{open:E,onOpenChange:C,children:(0,r.jsxs)(ep,{children:[(0,r.jsxs)(ef,{children:[(0,r.jsx)(eh,{children:"Nomear Produto"}),(0,r.jsxs)(eg,{children:["Produto n\xe3o encontrado. Por favor, insira um nome para o produto com c\xf3digo EAN ",e,"."]})]}),(0,r.jsx)(x,{type:"text",placeholder:"Nome do Produto",value:P,onChange:e=>S(e.target.value)}),(0,r.jsxs)(ex,{children:[(0,r.jsx)(ey,{onClick:()=>{C(!1),t(""),l(null),u(1)},children:"Cancelar"}),(0,r.jsx)(ev,{onClick:()=>{if(""===P.trim()){h({title:"Error",description:"Por favor, insira um nome para o produto."});return}p([...m,{eanCode:e,productName:P,expirationDate:n,quantity:c}]),t(""),l(null),u(1),C(!1),S(""),h({title:"Sucesso",description:"Produto escaneado e salvo com nome manual."})},children:"Confirmar"})]})]})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[205,441,684,358],()=>t(2751)),_N_E=e.O()}]);